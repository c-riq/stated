# SPARQL query to get all subclasses of city (Q515)
# This can be executed at https://query.wikidata.org/

SELECT DISTINCT ?citySubclass ?citySubclassLabel
WHERE {
  # Get all subclasses of city (Q515) with a limited depth
  # Using a more explicit approach instead of the transitive property (*)
  {
    # Direct subclasses
    ?citySubclass wdt:P279 wd:Q515.
  } UNION {
    # Subclasses one level down
    ?intermediate wdt:P279 wd:Q515.
    ?citySubclass wdt:P279 ?intermediate.
  } UNION {
    # Subclasses two levels down
    ?intermediate1 wdt:P279 wd:Q515.
    ?intermediate2 wdt:P279 ?intermediate1.
    ?citySubclass wdt:P279 ?intermediate2.
  }
  
  # Get labels in English
  SERVICE wikibase:label { 
    bd:serviceParam wikibase:language "en". 
  }
}
ORDER BY ?citySubclassLabel
LIMIT 1000  # Adding a limit to prevent timeout
